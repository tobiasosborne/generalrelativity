\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{gr-tikz-templates}[2026/02/23 GR lecture notes TikZ/pgfplots templates]

% Requires gr-style.sty (colors) and gr-macros.sty (TikZ base styles) loaded first.
\RequirePackage{pgfplotstable}

% ================================================================
%  STANDARD DIMENSIONS
% ================================================================
\newlength{\grfigwidth}      \setlength{\grfigwidth}{7cm}
\newlength{\grfigheight}     \setlength{\grfigheight}{5cm}
\newlength{\grwidefigwidth}  \setlength{\grwidefigwidth}{9cm}
\newlength{\grwidefigheight} \setlength{\grwidefigheight}{6cm}

% ================================================================
%  LINE WIDTHS
% ================================================================
\tikzset{
  gr thin/.style={line width=0.4pt},
  gr std/.style={line width=0.8pt},
  gr thick/.style={line width=1.2pt},
  gr axis/.style={line width=0.6pt},
}

% ================================================================
%  COLOR CYCLE (matches the GR palette)
% ================================================================
\pgfplotscreateplotcyclelist{grcolors}{
  {cgblue,   line width=1.0pt},
  {munsell,  line width=1.0pt},
  {banana!80!black, line width=1.0pt},
  {spacecadet, line width=1.0pt},
  {cgblue,   line width=1.0pt, dashed},
  {munsell,  line width=1.0pt, dashed},
}

% ================================================================
%  COLORMAPS
% ================================================================
% Potential: deep blue → teal → light → gold
\pgfplotsset{
  colormap={grpotential}{
    rgb255(0cm)=(13,40,76)
    rgb255(2cm)=(0,124,165)
    rgb255(4cm)=(234,237,234)
    rgb255(5cm)=(255,217,50)
  },
  colormap={grsurface}{
    rgb255(0cm)=(0,143,168)
    rgb255(3cm)=(234,237,234)
  },
}

% ================================================================
%  PGFPLOTS STYLES
% ================================================================

% Base 2D plot
\pgfplotsset{
  grplot/.style={
    width=\grfigwidth,
    height=\grfigheight,
    axis lines=left,
    every axis x label/.style={at={(ticklabel* cs:1.0)}, anchor=west,
      font=\small},
    every axis y label/.style={at={(ticklabel* cs:1.0)}, anchor=south,
      font=\small},
    every axis title/.style={at={(0.5,1.05)}, anchor=south,
      font=\sf\small\bfseries, text=cgblue},
    tick label style={font=\footnotesize, text=spacecadet},
    axis line style={spacecadet, line width=0.6pt},
    major grid style={light-gray, very thin},
    grid=major,
    cycle list name=grcolors,
    legend style={
      font=\footnotesize, draw=spacecadet!30,
      fill=white, fill opacity=0.8, text opacity=1,
      rounded corners=2pt, inner sep=3pt,
    },
    clip=true,
  },
  % Wide variant
  grplotwide/.style={
    grplot,
    width=\grwidefigwidth,
    height=\grwidefigheight,
  },
}

% 3D surface plot
\pgfplotsset{
  gr3d/.style={
    width=\grwidefigwidth,
    height=\grwidefigheight,
    every axis x label/.style={at={(ticklabel* cs:1.0)}, anchor=west,
      font=\small},
    every axis y label/.style={at={(ticklabel* cs:1.0)}, anchor=south,
      font=\small},
    every axis z label/.style={at={(ticklabel* cs:1.0)}, anchor=south,
      font=\small},
    every axis title/.style={at={(0.5,1.05)}, anchor=south,
      font=\sf\small\bfseries, text=cgblue},
    tick label style={font=\tiny, text=spacecadet},
    axis line style={spacecadet, line width=0.6pt},
    cycle list name=grcolors,
    colormap name=grsurface,
  },
}

% Contour plot (top-down view)
\pgfplotsset{
  grcontour/.style={
    grplotwide,
    view={0}{90},
    colormap name=grpotential,
    colorbar,
    colorbar style={
      tick label style={font=\tiny},
      width=0.2cm,
    },
  },
}

% ================================================================
%  REUSABLE TikZ \pic DEFINITIONS
% ================================================================

% Manifold blob: \pic at (x,y) {manifold blob={$\M$}};
\tikzset{
  manifold blob/.pic={
    \draw[thick, spacecadet]
      (0,0) .. controls (0.4,0.7) and (1.2,0.8) .. (1.8,0.5)
      .. controls (2.2,0.3) and (2.3,-0.2) .. (2.0,-0.6)
      .. controls (1.6,-0.9) and (0.6,-0.8) .. (0.2,-0.5)
      .. controls (-0.1,-0.3) and (-0.2,0.2) .. (0,0);
    \node[font=\sf\small, text=cgblue] at (1.0,0.9) {#1};
  },
}

% Chart region: \pic[chart color=cgblue] at (x,y) {chart region={O_\alpha}};
\tikzset{
  chart color/.store in=\grchartcolor,
  chart color=cgblue,
  chart region/.pic={
    \draw[thick, \grchartcolor, fill=\grchartcolor!8]
      (0,0) .. controls (0.2,0.35) and (0.7,0.4) .. (1.1,0.25)
      .. controls (1.4,0.1) and (1.4,-0.2) .. (1.1,-0.35)
      .. controls (0.7,-0.45) and (0.2,-0.35) .. (0,0);
    \node[font=\small, text=\grchartcolor] at (0.7,0) {$#1$};
  },
}

% Coordinate axes: \pic at (x,y) {coord axes={$\Rn{n}$}};
\tikzset{
  coord axes/.pic={
    \draw[axisstyle, spacecadet] (0,-0.8) -- (0,0.8);
    \draw[axisstyle, spacecadet] (-0.2,0) -- (2.0,0);
    \node[font=\sf\small, text=spacecadet] at (1.8,0.8) {#1};
  },
}

% Map arrow style
\tikzset{
  map arrow/.style={thick, -{Stealth[length=6pt]}, cgblue},
}

% Tangent plane: \pic at (x,y) {tangent plane};
\tikzset{
  tangent plane/.pic={
    \draw[thick, munsell, fill=munsell!8, opacity=0.7]
      (-0.8,0.4) -- (0.8,0.4) -- (1.1,-0.3) -- (-0.5,-0.3) -- cycle;
  },
}

\endinput
