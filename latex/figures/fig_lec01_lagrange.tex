% fig_lec01_lagrange.tex — Effective potential + trajectory near L4
% Data: generated by scripts/sim_lec01.jl (μ = 0.01)

\begin{center}
\begin{tikzpicture}
\begin{axis}[
    grplotwide,
    xlabel={$x$},
    ylabel={$y$},
    title={Effective potential $\Phi_{\mathrm{eff}}$ in the co-rotating frame},
    xmin=-1.5, xmax=2.0,
    ymin=-1.5, ymax=1.5,
    view={0}{90},
    colormap name=grpotential,
    colorbar,
    colorbar style={tick label style={font=\tiny}, width=0.2cm},
    point meta min=-3.5,
    point meta max=-1.2,
    unbounded coords=jump,
]
    % Potential as pseudo-colour
    \addplot3[
        surf,
        shader=interp,
        mesh/rows=60,
        opacity=0.9,
    ] table {data/lec01_potential.dat};

    % Lagrange points
    \addplot[only marks, mark=diamond*, mark size=3.5pt, banana,
             draw=spacecadet, thick] table[x index=0, y index=1]
             {data/lec01_lagrange_points.dat};

    % Mass positions
    \addplot[only marks, mark=*, mark size=4pt, spacecadet,
             fill=spacecadet] table[x index=0, y index=1] {data/lec01_masses.dat};

    % L-point labels
    \node[font=\sf\scriptsize, text=spacecadet, fill=white, fill opacity=0.7,
          text opacity=1, inner sep=1pt, rounded corners=1pt]
        at (axis cs:0.85,0.12) {$L_1$};
    \node[font=\sf\scriptsize, text=spacecadet, fill=white, fill opacity=0.7,
          text opacity=1, inner sep=1pt, rounded corners=1pt]
        at (axis cs:1.15,0.12) {$L_2$};
    \node[font=\sf\scriptsize, text=spacecadet, fill=white, fill opacity=0.7,
          text opacity=1, inner sep=1pt, rounded corners=1pt]
        at (axis cs:-1.00,0.12) {$L_3$};
    \node[font=\sf\scriptsize, text=spacecadet, fill=white, fill opacity=0.7,
          text opacity=1, inner sep=1pt, rounded corners=1pt]
        at (axis cs:0.49,0.97) {$L_4$};
    \node[font=\sf\scriptsize, text=spacecadet, fill=white, fill opacity=0.7,
          text opacity=1, inner sep=1pt, rounded corners=1pt]
        at (axis cs:0.49,-0.97) {$L_5$};

    % Mass labels
    \node[font=\sf\scriptsize, text=white]
        at (axis cs:-0.01,-0.15) {$M_1$};
    \node[font=\sf\scriptsize, text=white]
        at (axis cs:0.99,-0.15) {$M_2$};
\end{axis}
\end{tikzpicture}
\end{center}

\begin{center}
\begin{tikzpicture}
\begin{axis}[
    grplot,
    width=7cm, height=7cm,
    xlabel={$x$},
    ylabel={$y$},
    title={Tadpole orbit near $L_4$},
    axis equal,
]
    % Trajectory
    \addplot[cgblue, line width=0.8pt, no markers]
        table[x index=0, y index=1] {data/lec01_trajectory.dat};

    % L4 point
    \addplot[only marks, mark=diamond*, mark size=4pt, banana,
             draw=spacecadet, thick]
        coordinates {(0.49, 0.866025)};
    \node[font=\sf\footnotesize, text=spacecadet, anchor=south west]
        at (axis cs:0.51, 0.88) {$L_4$};

    % Mass positions (faint)
    \addplot[only marks, mark=*, mark size=3pt, spacecadet!40]
        coordinates {(-0.01, 0) (0.99, 0)};
\end{axis}
\end{tikzpicture}
\end{center}
